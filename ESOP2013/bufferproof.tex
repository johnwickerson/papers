%Starting.
\pgfdeclarelayer{frontmost}
\pgfdeclarelayer{colnameslayer}
\pgfsetlayers{main,frontmost,colnameslayer}
\begin{tikzpicture}[x=1mm,y=1mm,scale=0.9]
% State has been set.
\draw [line width = 0.6mm, \commandcolor] (1.65,-6.) -- (1.65,-5.);
\draw [line width = 0.6mm, \commandcolor] (25.35,-6.) -- (25.35,-5.);
\fill[fill=\commandcolor, rounded corners=1.8mm] (1.3,-5.) rectangle (25.7,0.);
\fill[fill=\commandcolor] (1.3,-5.) rectangle (25.7,-2.5);
\draw [white] (1.3,-2.5) node[anchor=west]{\code{while true \{}};
\draw [line width = 0.5mm, white] (28.,0.) -- (28.,-5.);
\draw [line width = 0.5mm, white] (79.,0.) -- (79.,-5.);
\fill [black!15] (28.,0.) -- (28.,-5.) -- (79.,-5.) -- (79.,0.) -- cycle;
\begin{pgfonlayer}{frontmost}
\draw [black] (53.5,-5.) node{\smash{$\ml[t]{(\code{full} ∧ \code{c}↦\underscore) ∨ (¬\code{full} ∧ \emp)}$}};
\end{pgfonlayer}
\draw [line width = 0.5mm, white] (28.,-5.) -- (28.,-7.);
\draw [line width = 0.5mm, white] (79.,-5.) -- (79.,-7.);
\fill [black!15] (28.,-5.) -- (28.,-7.) -- (79.,-7.) -- (79.,-5.) -- cycle;
\draw [line width = 0.6mm, \commandcolor] (1.65,-7.) -- (1.65,-5.);
\draw [line width = 0.6mm, \commandcolor] (25.35,-7.) -- (25.35,-5.);
\draw [line width = 0.6mm, \commandcolor] (3.65,-13.) -- (3.65,-12.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-13.) -- (80.35,-12.);
% added {
\fill[fill=black!15, pattern color=white, pattern=north west lines] (28,0) rectangle (79,-7);
% }
\fill[fill=\commandcolor, rounded corners=1.8mm] (3.3,-12.) rectangle (80.7,-7.);
\fill[fill=\commandcolor] (3.3,-12.) rectangle (80.7,-9.5);
\draw [white] (3.3,-9.5) node[anchor=west]{\code{with buff when full \{}};
\draw [line width = 0.6mm, \commandcolor] (1.65,-12.) -- (1.65,-7.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-12.) -- (25.35,-7.);
\draw [line width = 0.6mm, \commandcolor] (3.65,-18.) -- (3.65,-12.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-18.) -- (80.35,-12.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-18.) -- (1.65,-12.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-18.) -- (25.35,-12.);
\draw [line width = 0.5mm, white] (5.,-12.) -- (5.,-18.);
\draw [line width = 0.5mm, white] (24.,-12.) -- (24.,-18.);
\fill [black!15] (5.,-12.) -- (5.,-18.) -- (24.,-18.) -- (24.,-12.) -- cycle;
\begin{pgfonlayer}{frontmost}
\draw [black] (14.5,-16.) node{\smash{$\ml[t]{\code{full}}$}};
\end{pgfonlayer}
\draw [line width = 0.5mm, white] (28.,-12.) -- (28.,-18.);
\draw [line width = 0.5mm, white] (79.,-12.) -- (79.,-18.);
\fill [black!15] (28.,-12.) -- (28.,-18.) -- (79.,-18.) -- (79.,-12.) -- cycle;
\draw [line width = 0.6mm, \commandcolor] (3.65,-19.) -- (3.65,-18.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-19.) -- (80.35,-18.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-19.) -- (1.65,-18.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-19.) -- (25.35,-18.);
\draw [line width = 0.6mm, \commandcolor] (3.65,-25.) -- (3.65,-19.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-25.) -- (80.35,-19.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-25.) -- (1.65,-19.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-25.) -- (25.35,-19.);
\draw [line width = 0.5mm, white] (5.,-19.) -- (5.,-25.);
\draw [line width = 0.5mm, white] (79.,-19.) -- (79.,-25.);
\fill [black!15] (5.,-19.) -- (5.,-25.) -- (79.,-25.) -- (79.,-19.) -- cycle;
\begin{pgfonlayer}{frontmost}
\draw [black] (42.,-23.) node{\smash{$\ml[t]{\code{full} ∧ \code{c}↦\underscore}$}};
\end{pgfonlayer}
\draw [line width = 0.6mm, \commandcolor] (3.65,-26.) -- (3.65,-25.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-26.) -- (80.35,-25.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-26.) -- (1.65,-25.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-26.) -- (25.35,-25.);
\draw [line width = 0.6mm, \commandcolor] (3.65,-32.) -- (3.65,-26.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-32.) -- (80.35,-26.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-32.) -- (1.65,-26.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-32.) -- (25.35,-26.);
\draw [line width = 0.5mm, white] (5.,-26.) -- (5.,-32.);
\draw [line width = 0.5mm, white] (24.,-26.) -- (24.,-32.);
\fill [black!15] (5.,-26.) -- (5.,-32.) -- (24.,-32.) -- (24.,-26.) -- cycle;
\begin{pgfonlayer}{frontmost}
\draw [black] (14.5,-30.) node{\smash{$\ml[t]{\code{c}↦\underscore}$}};
\end{pgfonlayer}
\draw [line width = 0.5mm, white] (28.,-26.) -- (28.,-32.);
\draw [line width = 0.5mm, white] (79.,-26.) -- (79.,-32.);
\fill [black!15] (28.,-26.) -- (28.,-32.) -- (79.,-32.) -- (79.,-26.) -- cycle;
\begin{pgfonlayer}{frontmost}
\draw [black] (53.5,-30.) node{\smash{$\ml[t]{\code{full} ∧ \emp}$}};
\end{pgfonlayer}
\begin{pgfonlayer}{frontmost}
\fill[fill=\commandcolor] (28.,-37.) rectangle (79.,-32.);
\draw [white] (28.,-34.5) node[anchor=west]{\code{\begin{tabular}{@{\hspace{-0.8mm}}l@{\hspace{-0.8mm}}}full := false\end{tabular}}};
\end{pgfonlayer}
\draw [line width = 0.5mm, white] (5.,-32.) -- (5.,-37.);
\draw [line width = 0.5mm, white] (24.,-32.) -- (24.,-37.);
\fill [black!15] (5.,-32.) -- (5.,-37.) -- (24.,-37.) -- (24.,-32.) -- cycle;
\draw [line width = 0.6mm, \commandcolor] (3.65,-37.) -- (3.65,-32.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-37.) -- (80.35,-32.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-37.) -- (1.65,-32.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-37.) -- (25.35,-32.);
\draw [line width = 0.6mm, \commandcolor] (3.65,-38.) -- (3.65,-37.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-38.) -- (80.35,-37.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-38.) -- (1.65,-37.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-38.) -- (25.35,-37.);
\draw [line width = 0.5mm, white] (5.,-37.) -- (5.,-38.);
\draw [line width = 0.5mm, white] (24.,-37.) -- (24.,-38.);
\fill [black!15] (5.,-37.) -- (5.,-38.) -- (24.,-38.) -- (24.,-37.) -- cycle;
\draw [line width = 0.5mm, white] (28.,-37.) -- (28.,-38.);
\draw [line width = 0.5mm, white] (79.,-37.) -- (79.,-38.);
\fill [black!15] (28.,-37.) -- (28.,-38.) -- (79.,-38.) -- (79.,-37.) -- cycle;
\begin{pgfonlayer}{frontmost}
\draw [black] (53.5,-41.) node{\smash{$\ml[t]{¬\code{full} ∧ \emp}$}};
\end{pgfonlayer}
\begin{pgfonlayer}{frontmost}
\fill[fill=\commandcolor] (5.,-43.) rectangle (24.,-38.);
\draw [white] (5.,-40.5) node[anchor=west]{\code{\begin{tabular}{@{\hspace{-0.8mm}}l@{\hspace{-0.8mm}}}y := c\end{tabular}}};
\end{pgfonlayer}
\draw [line width = 0.6mm, \commandcolor] (3.65,-43.) -- (3.65,-38.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-43.) -- (80.35,-38.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-43.) -- (1.65,-38.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-43.) -- (25.35,-38.);
\draw [line width = 0.5mm, white] (28.,-38.) -- (28.,-43.);
\draw [line width = 0.5mm, white] (79.,-38.) -- (79.,-43.);
\fill [black!15] (28.,-38.) -- (28.,-43.) -- (79.,-43.) -- (79.,-38.) -- cycle;
\draw [line width = 0.6mm, \commandcolor] (3.65,-44.) -- (3.65,-43.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-44.) -- (80.35,-43.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-44.) -- (1.65,-43.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-44.) -- (25.35,-43.);
\draw [line width = 0.5mm, white] (5.,-43.) -- (5.,-44.);
\draw [line width = 0.5mm, white] (24.,-43.) -- (24.,-44.);
\fill [black!15] (5.,-43.) -- (5.,-44.) -- (24.,-44.) -- (24.,-43.) -- cycle;
\begin{pgfonlayer}{frontmost}
\draw [black] (14.5,-47.) node{\smash{$\ml[t]{\code{y}↦\underscore}$}};
\end{pgfonlayer}
\draw [line width = 0.5mm, white] (5.,-44.) -- (5.,-50.);
\draw [line width = 0.5mm, white] (24.,-44.) -- (24.,-50.);
\fill [black!15] (5.,-44.) -- (5.,-50.) -- (24.,-50.) -- (24.,-44.) -- cycle;
\draw [line width = 0.6mm, \commandcolor] (3.65,-50.) -- (3.65,-44.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-50.) -- (80.35,-44.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-50.) -- (1.65,-44.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-50.) -- (25.35,-44.);
\draw [line width = 0.5mm, white] (28.,-44.) -- (28.,-50.);
\draw [line width = 0.5mm, white] (79.,-44.) -- (79.,-50.);
\fill [black!15] (28.,-44.) -- (28.,-50.) -- (79.,-50.) -- (79.,-44.) -- cycle;
\begin{pgfonlayer}{frontmost}
\draw [black] (53.5,-48.) node{\smash{$\ml[t]{(\code{full} ∧ \code{c}↦\underscore) ∨ (¬\code{full} ∧ \emp)}$}};
\end{pgfonlayer}
\draw [line width = 0.6mm, \commandcolor] (3.65,-50.) -- (3.65,-49.);
\draw [line width = 0.6mm, \commandcolor] (80.35,-50.) -- (80.35,-49.);
\fill[fill=\commandcolor, rounded corners=1.8mm] (3.3,-55.) rectangle (80.7,-50.);
\fill[fill=\commandcolor] (3.3,-52.5) rectangle (80.7,-50.);
\draw [white] (3.3,-52.5) node[anchor=west]{\code{\}}};
\draw [line width = 0.6mm, \commandcolor] (1.65,-55.) -- (1.65,-50.);
%\draw [line width = 0.6mm, \commandcolor] (25.35,-55.) -- (25.35,-50.);
\draw [line width = 0.5mm, white] (28.,-55.) -- (28.,-58.);
\draw [line width = 0.5mm, white] (79.,-55.) -- (79.,-58.);
\fill [black!15] (28.,-55.) -- (28.,-58.) -- (79.,-58.) -- (79.,-55.) -- cycle;
\draw [line width = 0.6mm, \commandcolor] (1.65,-58.) -- (1.65,-55.);
\draw [line width = 0.6mm, \commandcolor] (25.35,-58.) -- (25.35,-55.);
\draw [line width = 0.5mm, white] (5.,-55.) -- (5.,-58.);
\draw [line width = 0.5mm, white] (24.,-55.) -- (24.,-58.);
\fill [black!15] (5.,-55.) -- (5.,-58.) -- (24.,-58.) -- (24.,-55.) -- cycle;
\begin{pgfonlayer}{frontmost}
\fill[fill=\commandcolor] (5.,-63.) rectangle (24.,-58.);
\draw [white] (5.,-60.5) node[anchor=west]{\code{\begin{tabular}{@{\hspace{-0.8mm}}l@{\hspace{-0.8mm}}}dispose(y)\end{tabular}}};
\end{pgfonlayer}
\draw [line width = 0.5mm, white] (28.,-58.) -- (28.,-63.);
\draw [line width = 0.5mm, white] (79.,-58.) -- (79.,-63.);
\fill [black!15] (28.,-58.) -- (28.,-63.) -- (79.,-63.) -- (79.,-58.) -- cycle;
\draw [line width = 0.6mm, \commandcolor] (1.65,-63.) -- (1.65,-58.);
\draw [line width = 0.6mm, \commandcolor] (25.35,-63.) -- (25.35,-58.);
\draw [line width = 0.5mm, white] (28.,-63.) -- (28.,-65.);
\draw [line width = 0.5mm, white] (79.,-63.) -- (79.,-65.);
\fill [black!15] (28.,-63.) -- (28.,-65.) -- (79.,-65.) -- (79.,-63.) -- cycle;
\draw [line width = 0.6mm, \commandcolor] (1.65,-65.) -- (1.65,-63.);
\draw [line width = 0.6mm, \commandcolor] (25.35,-65.) -- (25.35,-63.);
\draw [line width = 0.6mm, \commandcolor] (1.65,-65.) -- (1.65,-64.);
\draw [line width = 0.6mm, \commandcolor] (25.35,-65.) -- (25.35,-64.);
\fill[fill=\commandcolor, rounded corners=1.8mm] (1.3,-70.) rectangle (25.7,-65.);
\fill[fill=\commandcolor] (1.3,-67.5) rectangle (25.7,-65.);
\draw [white] (1.3,-67.5) node[anchor=west]{\code{\}}};
\draw [line width = 0.5mm, white] (28.,-65.) -- (28.,-70.);
\draw [line width = 0.5mm, white] (79.,-65.) -- (79.,-70.);
\fill [black!15] (28.,-65.) -- (28.,-70.) -- (79.,-70.) -- (79.,-65.) -- cycle;
% added {
\fill[fill=black!15, pattern color=white, pattern=north west lines] (28,-55) rectangle (79,-70);
% }
\end{tikzpicture}
%Finished.